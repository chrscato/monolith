{% extends 'base.html' %}

{% block title %}Bill Review Instructions{% endblock %}

{% block content %}
<div class="container">
    <h1 class="mb-4">Bill Review Process Instructions</h1>

    <!-- Quick Navigation -->
    <div class="card mb-4">
        <div class="card-header">
            <h5 class="mb-0">Quick Navigation</h5>
        </div>
        <div class="card-body">
            <div class="row">
                <div class="col-md-6">
                    <h6>Common Statuses:</h6>
                    <ul class="list-unstyled">
                        <li><a href="#unmapped" class="text-decoration-none">→ UNMAPPED</a></li>
                        <li><a href="#to-validate" class="text-decoration-none">→ TO_VALIDATE</a></li>
                    </ul>
                </div>
                <div class="col-md-6">
                    <h6>Common Actions:</h6>
                    <ul class="list-unstyled">
                        <li><a href="#map-bill" class="text-decoration-none">→ Map Bill to Order</a></li>
                        <li><a href="#validate-bill" class="text-decoration-none">→ Validate Bill</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <!-- Status Instructions -->
    <div class="accordion" id="statusAccordion">
        <!-- UNMAPPED Status -->
        <div class="accordion-item" id="unmapped">
            <h2 class="accordion-header">
                <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#unmappedCollapse">
                    UNMAPPED Status
                </button>
            </h2>
            <div id="unmappedCollapse" class="accordion-collapse collapse show" data-bs-parent="#statusAccordion">
                <div class="accordion-body">
                    <h5>Description</h5>
                    <p>Bills that have not been mapped to an order in the system.</p>
                    
                    <h5>Required Actions</h5>
                    <ol>
                        <li>Review bill details and patient information</li>
                        <li>Search for matching order in the system</li>
                        <li>Map bill to the correct order</li>
                    </ol>

                    <h5>Common Issues</h5>
                    <ul>
                        <li>Missing or incorrect patient information</li>
                        <li>Multiple orders for the same patient</li>
                        <li>Date mismatches between bill and order</li>
                    </ul>

                    <div class="alert alert-info">
                        <i class="bi bi-info-circle"></i>
                        <strong>Tip:</strong> Use the patient's last name and date of service to find the correct order.
                    </div>
                </div>
            </div>
        </div>

        <!-- TO_VALIDATE Status -->
        <div class="accordion-item" id="to-validate">
            <h2 class="accordion-header">
                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#toValidateCollapse">
                    TO_VALIDATE Status
                </button>
            </h2>
            <div id="toValidateCollapse" class="accordion-collapse collapse" data-bs-parent="#statusAccordion">
                <div class="accordion-body">
                    <h5>Description</h5>
                    <p>Bills that have been mapped but need validation of line items and charges.</p>
                    
                    <h5>Required Actions</h5>
                    <ol>
                        <li>Compare bill line items with order items</li>
                        <li>Verify CPT codes and modifiers</li>
                        <li>Check charge amounts against contracted rates</li>
                        <li>Validate provider information</li>
                    </ol>

                    <h5>Common Issues</h5>
                    <ul>
                        <li>Mismatched CPT codes</li>
                        <li>Incorrect modifiers</li>
                        <li>Charge amount discrepancies</li>
                        <li>Missing or incorrect provider information</li>
                    </ul>

                    <div class="alert alert-info">
                        <i class="bi bi-info-circle"></i>
                        <strong>Tip:</strong> Use the side-by-side comparison view to easily spot discrepancies.
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Action Instructions -->
    <h2 class="mt-4 mb-3">Common Actions</h2>
    <div class="accordion" id="actionAccordion">
        <!-- Map Bill to Order -->
        <div class="accordion-item" id="map-bill">
            <h2 class="accordion-header">
                <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#mapBillCollapse">
                    Map Bill to Order
                </button>
            </h2>
            <div id="mapBillCollapse" class="accordion-collapse collapse show" data-bs-parent="#actionAccordion">
                <div class="accordion-body">
                    <h5>Steps</h5>
                    <ol>
                        <li>From the bill detail page, click "Map to Order"</li>
                        <li>Enter search criteria (patient name, date of service)</li>
                        <li>Review matching orders</li>
                        <li>Select the correct order</li>
                        <li>Confirm the mapping</li>
                    </ol>

                    <div class="alert alert-warning">
                        <i class="bi bi-exclamation-triangle"></i>
                        <strong>Important:</strong> Verify patient information and dates before confirming the mapping.
                    </div>
                </div>
            </div>
        </div>

        <!-- Validate Bill -->
        <div class="accordion-item" id="validate-bill">
            <h2 class="accordion-header">
                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#validateBillCollapse">
                    Validate Bill
                </button>
            </h2>
            <div id="validateBillCollapse" class="accordion-collapse collapse" data-bs-parent="#actionAccordion">
                <div class="accordion-body">
                    <h5>Steps</h5>
                    <ol>
                        <li>Review each line item against the order</li>
                        <li>Check CPT codes and modifiers</li>
                        <li>Verify charge amounts</li>
                        <li>Update any incorrect information</li>
                        <li>Add any missing line items</li>
                        <li>Submit for final review</li>
                    </ol>

                    <div class="alert alert-warning">
                        <i class="bi bi-exclamation-triangle"></i>
                        <strong>Important:</strong> Document any changes made during validation.
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %} 